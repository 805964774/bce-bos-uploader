!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.baidubce=t()}}(function(){var t;return function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var p=n[s]={exports:{}};t[s][0].call(p.exports,function(e){var n=t[s][1][e];return o(n?n:e)},p,p.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e,n){var r=t(46),o=t(20),i=t(18),s=t(35),a=t(36);e.exports={bos:{Uploader:s},utils:a,sdk:{Q:r,BosClient:o,Auth:i}}},{18:18,20:20,35:35,36:36,46:46}],2:[function(t,e,n){"use strict";var r=t(9),o=t(3);e.exports=o(r)},{3:3,9:9}],3:[function(t,e,n){"use strict";var r=t(4);e.exports=function(t){return function(e,n,o,i){return t(r(n),e,o,i)}}},{4:4}],4:[function(t,e,n){var r=t(11),o=t(10),i=t(12),s=t(7);e.exports=function(t){return function(e,n,a){a=r(a||o),e=e||[];var u=s(e);if(0>=t)return a(null);var c=!1,p=0,l=!1;!function f(){if(c&&0>=p)return a(null);for(;t>p&&!l;){var r=u();if(null===r)return c=!0,void(0>=p&&a(null));p+=1,n(e[r],r,i(function(t){p-=1,t?(a(t),l=!0):f()}))}}()}}},{10:10,11:11,12:12,7:7}],5:[function(t,e,n){"use strict";e.exports=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],6:[function(t,e,n){"use strict";var r=t(5);e.exports=function(t){return r(t)||"number"==typeof t.length&&t.length>=0&&t.length%1===0}},{5:5}],7:[function(t,e,n){"use strict";var r=t(8),o=t(6);e.exports=function(t){var e,n,i=-1;return o(t)?(e=t.length,function(){return i++,e>i?i:null}):(n=r(t),e=n.length,function(){return i++,e>i?n[i]:null})}},{6:6,8:8}],8:[function(t,e,n){"use strict";e.exports=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}},{}],9:[function(t,e,n){"use strict";var r=t(11),o=t(10),i=t(6);e.exports=function(t,e,n,s){s=r(s||o),e=e||[];var a=i(e)?[]:{};t(e,function(t,e,r){n(t,function(t,n){a[e]=n,r(t)})},function(t){s(t,a)})}},{10:10,11:11,6:6}],10:[function(t,e,n){"use strict";e.exports=function(){}},{}],11:[function(t,e,n){"use strict";e.exports=function(t){return function(){null!==t&&(t.apply(this,arguments),t=null)}}},{}],12:[function(t,e,n){"use strict";e.exports=function(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}},{}],13:[function(t,e,n){function r(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function o(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function i(t,e){return function(n){return t(e(n))}}function s(t,e){var n=B(t)||v(t)?o(t.length,String):[],r=n.length,i=!!r;for(var s in t)!e&&!A.call(t,s)||i&&("length"==s||f(s,r))||n.push(s);return n}function a(t,e,n){var r=t[e];A.call(t,e)&&_(r,n)&&(void 0!==n||e in t)||(t[e]=n)}function u(t){if(!d(t))return P(t);var e=[];for(var n in Object(t))A.call(t,n)&&"constructor"!=n&&e.push(n);return e}function c(t,e){return e=z(void 0===e?t.length-1:e,0),function(){for(var n=arguments,o=-1,i=z(n.length-e,0),s=Array(i);++o<i;)s[o]=n[e+o];o=-1;for(var a=Array(e+1);++o<e;)a[o]=n[o];return a[e]=s,r(t,this,a)}}function p(t,e,n,r){n||(n={});for(var o=-1,i=e.length;++o<i;){var s=e[o],u=r?r(n[s],t[s],s,n,t):void 0;a(n,s,void 0===u?t[s]:u)}return n}function l(t){return c(function(e,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,s&&h(n[0],n[1],s)&&(i=3>o?void 0:i,o=1),e=Object(e);++r<o;){var a=n[r];a&&t(e,a,r,i)}return e})}function f(t,e){return e=null==e?x:e,!!e&&("number"==typeof t||N.test(t))&&t>-1&&t%1==0&&e>t}function h(t,e,n){if(!k(n))return!1;var r=typeof e;return("number"==r?y(n)&&f(e,n.length):"string"==r&&e in n)?_(n[e],t):!1}function d(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||C;return t===n}function _(t,e){return t===e||t!==t&&e!==e}function v(t){return b(t)&&A.call(t,"callee")&&(!I.call(t,"callee")||j.call(t)==O)}function y(t){return null!=t&&m(t.length)&&!g(t)}function b(t){return E(t)&&y(t)}function g(t){var e=k(t)?j.call(t):"";return e==w||e==S}function m(t){return"number"==typeof t&&t>-1&&t%1==0&&x>=t}function k(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function E(t){return!!t&&"object"==typeof t}function T(t){return y(t)?s(t):u(t)}var x=9007199254740991,O="[object Arguments]",w="[object Function]",S="[object GeneratorFunction]",N=/^(?:0|[1-9]\d*)$/,C=Object.prototype,A=C.hasOwnProperty,j=C.toString,I=C.propertyIsEnumerable,P=i(Object.keys,Object),z=Math.max,U=!I.call({valueOf:1},"valueOf"),B=Array.isArray,R=l(function(t,e){if(U||d(e)||y(e))return void p(e,T(e),t);for(var n in e)A.call(e,n)&&a(t,n,e[n])});e.exports=R},{}],14:[function(t,e,n){function r(t){var e=o(t)?u.call(t):"";return e==i||e==s}function o(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var i="[object Function]",s="[object GeneratorFunction]",a=Object.prototype,u=a.toString;e.exports=r},{}],15:[function(t,e,n){function r(t){return!!t&&"object"==typeof t}function o(t){return"number"==typeof t||r(t)&&a.call(t)==i}var i="[object Number]",s=Object.prototype,a=s.toString;e.exports=o},{}],16:[function(t,e,n){function r(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}e.exports=r},{}],17:[function(t,e,n){function r(t){return!!t&&"object"==typeof t}function o(t){return"string"==typeof t||!u(t)&&r(t)&&a.call(t)==i}var i="[object String]",s=Object.prototype,a=s.toString,u=Array.isArray;e.exports=o},{}],18:[function(t,e,n){function r(t,e){this.ak=t,this.sk=e}var o=t(49),i=t(48),s=t(22),a=t(25);r.prototype.generateAuthorization=function(t,e,n,r,i,s,a){var u=i?new Date(1e3*i):new Date,c=o.format("bce-auth-v1/%s/%s/%d",this.ak,u.toISOString().replace(/\.\d+Z$/,"Z"),s||1800),p=this.hash(c,this.sk),l=this.uriCanonicalization(e),f=this.queryStringCanonicalization(n||{}),h=this.headersCanonicalization(r||{},a),d=h[0],_=h[1],v=o.format("%s\n%s\n%s\n%s",t,l,f,d),y=this.hash(v,p);return _.length?o.format("%s/%s/%s",c,_.join(";"),y):o.format("%s//%s",c,y)},r.prototype.uriCanonicalization=function(t){return t},r.prototype.queryStringCanonicalization=function(t){var e=[];return Object.keys(t).forEach(function(n){if(n.toLowerCase()!==s.AUTHORIZATION.toLowerCase()){var r=null==t[n]?"":t[n];e.push(n+"="+a.normalize(r))}}),e.sort(),e.join("&")},r.prototype.headersCanonicalization=function(t,e){e&&e.length||(e=[s.HOST,s.CONTENT_MD5,s.CONTENT_LENGTH,s.CONTENT_TYPE]);var n={};e.forEach(function(t){n[t.toLowerCase()]=!0});var r=[];Object.keys(t).forEach(function(e){var s=t[e];s=i.isString(s)?a.trim(s):s,null!=s&&""!==s&&(e=e.toLowerCase(),(/^x\-bce\-/.test(e)||n[e]===!0)&&r.push(o.format("%s:%s",a.normalize(e),a.normalize(s))))}),r.sort();var u=[];return r.forEach(function(t){u.push(t.split(":")[0])}),[r.join("\n"),u]},r.prototype.hash=function(e,n){var r=t(43),o=r.createHmac("sha256",n);return o.update(e),o.digest("hex")},e.exports=r},{22:22,25:25,43:43,48:48,49:49}],19:[function(t,e,n){function r(t,e,n){o.call(this),this.config=a.extend({},u.DEFAULT_CONFIG,t),this.serviceId=e,this.regionSupported=!!n,this.config.endpoint=this._computeEndpoint(),this._httpAgent=null}var o=t(44).EventEmitter,i=t(49),s=t(46),a=t(48),u=t(21),c=t(18);i.inherits(r,o),r.prototype._computeEndpoint=function(){return this.config.endpoint?this.config.endpoint:this.regionSupported?i.format("%s://%s.%s.%s",this.config.protocol,this.serviceId,this.config.region,u.DEFAULT_SERVICE_DOMAIN):i.format("%s://%s.%s",this.config.protocol,this.serviceId,u.DEFAULT_SERVICE_DOMAIN)},r.prototype.createSignature=function(t,e,n,r,o){return s.fcall(function(){var i=new c(t.ak,t.sk);return i.generateAuthorization(e,n,r,o)})},e.exports=r},{18:18,21:21,44:44,46:46,48:48,49:49}],20:[function(t,e,n){function r(t){l.call(this,t,"bos",!0),this._httpAgent=null}var o=t(45),i=t(49),s=t(48),a=t(37),u=t(22),c=t(25),p=t(23),l=t(19),f=t(24),h=5368709120,d=2048;i.inherits(r,l),r.prototype.deleteObject=function(t,e,n){return n=n||{},this.sendRequest("DELETE",{bucketName:t,key:e,config:n.config})},r.prototype.putObject=function(t,e,n,r){if(!e)throw new TypeError("key should not be empty.");return r=this._checkOptions(r||{}),this.sendRequest("PUT",{bucketName:t,key:e,body:n,headers:r.headers,config:r.config})},r.prototype.putObjectFromBlob=function(t,e,n,r){var o={};return o[u.CONTENT_LENGTH]=n.size,r=s.extend(o,r),this.putObject(t,e,n,r)},r.prototype.getObjectMetadata=function(t,e,n){return n=n||{},this.sendRequest("HEAD",{bucketName:t,key:e,config:n.config})},r.prototype.initiateMultipartUpload=function(t,e,n){n=n||{};var r={};return r[u.CONTENT_TYPE]=n[u.CONTENT_TYPE]||f.guess(o.extname(e)),this.sendRequest("POST",{bucketName:t,key:e,params:{uploads:""},headers:r,config:n.config})},r.prototype.abortMultipartUpload=function(t,e,n,r){return r=r||{},this.sendRequest("DELETE",{bucketName:t,key:e,params:{uploadId:n},config:r.config})},r.prototype.completeMultipartUpload=function(t,e,n,r,o){var i={};return i[u.CONTENT_TYPE]="application/json; charset=UTF-8",o=this._checkOptions(s.extend(i,o)),this.sendRequest("POST",{bucketName:t,key:e,body:JSON.stringify({parts:r}),headers:o.headers,params:{uploadId:n},config:o.config})},r.prototype.uploadPartFromBlob=function(t,e,n,r,o,a,c){if(a.size!==o)throw new TypeError(i.format("Invalid partSize %d and data length %d",o,a.size));var p={};return p[u.CONTENT_LENGTH]=o,p[u.CONTENT_TYPE]="application/octet-stream",c=this._checkOptions(s.extend(p,c)),this.sendRequest("PUT",{bucketName:t,key:e,body:a,headers:c.headers,params:{partNumber:r,uploadId:n},config:c.config})},r.prototype.listParts=function(t,e,n,r){if(!n)throw new TypeError("uploadId should not empty");var o=["maxParts","partNumberMarker","uploadId"];return r=this._checkOptions(r||{},o),r.params.uploadId=n,this.sendRequest("GET",{bucketName:t,key:e,params:r.params,config:r.config})},r.prototype.listMultipartUploads=function(t,e){var n=["delimiter","maxUploads","keyMarker","prefix","uploads"];return e=this._checkOptions(e||{},n),e.params.uploads="",this.sendRequest("GET",{bucketName:t,params:e.params,config:e.config})},r.prototype.appendObject=function(t,e,n,r,o){if(!e)throw new TypeError("key should not be empty.");o=this._checkOptions(o||{});var i={append:""};return s.isNumber(r)&&(i.offset=r),this.sendRequest("POST",{bucketName:t,key:e,body:n,headers:o.headers,params:i,config:o.config})},r.prototype.appendObjectFromBlob=function(t,e,n,r,o){var i={};return i[u.CONTENT_LENGTH]=n.size,o=s.extend(i,o),this.appendObject(t,e,n,r,o)},r.prototype.sendRequest=function(t,e){var n={bucketName:null,key:null,body:null,headers:{},params:{},config:{},outputStream:null},r=s.extend(n,e),i=s.extend({},this.config,r.config),a=o.normalize(o.join("/v1",c.normalize(r.bucketName||""),c.normalize(r.key||"",!1))).replace(/\\/g,"/");return i.sessionToken&&(r.headers[u.SESSION_TOKEN]=i.sessionToken),this.sendHTTPRequest(t,a,r,i)},r.prototype.sendHTTPRequest=function(t,e,n,r){var o=this,i=this._httpAgent=new p(r),a={httpMethod:t,resource:e,args:n,config:r};s.each(["progress","error","abort"],function(t){i.on(t,function(e){o.emit(t,e,a)})});var u=this._httpAgent.sendRequest(t,e,n.body,n.headers,n.params,s.bind(this.createSignature,this),n.outputStream);return u.abort=function(){if(i._req&&i._req.xhr){var t=i._req.xhr;t.abort()}},u},r.prototype._checkOptions=function(t,e){var n={};return n.config=t.config||{},n.headers=this._prepareObjectHeaders(t),n.params=s.pick(t,e||[]),n},r.prototype._prepareObjectHeaders=function(t){var e=[u.CONTENT_LENGTH,u.CONTENT_ENCODING,u.CONTENT_MD5,u.X_BCE_CONTENT_SHA256,u.CONTENT_TYPE,u.CONTENT_DISPOSITION,u.ETAG,u.SESSION_TOKEN,u.CACHE_CONTROL,u.EXPIRES,u.X_BCE_OBJECT_ACL,u.X_BCE_OBJECT_GRANT_READ],n=0,r=s.pick(t,function(t,r){return-1!==e.indexOf(r)?!0:/^x\-bce\-meta\-/.test(r)?(n+=a.byteLength(r)+a.byteLength(""+t),!0):void 0});if(n>d)throw new TypeError("Metadata size should not be greater than "+d+".");if(r.hasOwnProperty(u.CONTENT_LENGTH)){var o=r[u.CONTENT_LENGTH];if(0>o)throw new TypeError("content_length should not be negative.");if(o>h)throw new TypeError("Object length should be less than "+h+". Use multi-part upload instead.")}if(r.hasOwnProperty("ETag")){var c=r.ETag;/^"/.test(c)||(r.ETag=i.format('"%s"',c))}return r.hasOwnProperty(u.CONTENT_TYPE)||(r[u.CONTENT_TYPE]="application/octet-stream"),r},e.exports=r},{19:19,22:22,23:23,24:24,25:25,37:37,45:45,48:48,49:49}],21:[function(t,e,n){n.DEFAULT_SERVICE_DOMAIN="baidubce.com",n.DEFAULT_CONFIG={protocol:"http",region:"bj"}},{}],22:[function(t,e,n){n.CONTENT_TYPE="Content-Type",n.CONTENT_LENGTH="Content-Length",n.CONTENT_MD5="Content-MD5",n.CONTENT_ENCODING="Content-Encoding",n.CONTENT_DISPOSITION="Content-Disposition",n.ETAG="ETag",n.CONNECTION="Connection",n.HOST="Host",n.USER_AGENT="User-Agent",n.CACHE_CONTROL="Cache-Control",n.EXPIRES="Expires",n.AUTHORIZATION="Authorization",n.X_BCE_DATE="x-bce-date",n.X_BCE_ACL="x-bce-acl",n.X_BCE_REQUEST_ID="x-bce-request-id",n.X_BCE_CONTENT_SHA256="x-bce-content-sha256",n.X_BCE_OBJECT_ACL="x-bce-object-acl",n.X_BCE_OBJECT_GRANT_READ="x-bce-object-grant-read",n.X_HTTP_HEADERS="http_headers",n.X_BODY="body",n.X_STATUS_CODE="status_code",n.X_MESSAGE="message",n.X_CODE="code",n.X_REQUEST_ID="request_id",n.SESSION_TOKEN="x-bce-security-token",n.X_VOD_MEDIA_TITLE="x-vod-media-title",n.X_VOD_MEDIA_DESCRIPTION="x-vod-media-description",n.ACCEPT_ENCODING="accept-encoding",n.ACCEPT="accept"},{}],23:[function(t,e,n){function r(t){o.call(this),this.config=t,this._req=null}var o=t(44).EventEmitter,i=t(37),s=t(46),a=t(48),u=t(49),c=t(22);u.inherits(r,o),r.prototype.sendRequest=function(t,e,n,r,o,i,u){var p=this._getRequestUrl(e,o),l={};l[c.X_BCE_DATE]=(new Date).toISOString().replace(/\.\d+Z$/,"Z"),l[c.CONTENT_TYPE]="application/json; charset=UTF-8",l[c.HOST]=/^\w+:\/\/([^\/]+)/.exec(this.config.endpoint)[1];var f=a.extend(l,r);if(!f.hasOwnProperty(c.CONTENT_LENGTH)){var h=this._guessContentLength(n);0===h&&/GET|HEAD/i.test(t)||(f[c.CONTENT_LENGTH]=h)}var d=this,_=i||a.noop;try{return s.resolve(_(this.config.credentials,t,e,o,f)).then(function(e,r){return e&&(f[c.AUTHORIZATION]=e),r&&(f[c.X_BCE_DATE]=r),d._doRequest(t,p,a.omit(f,c.CONTENT_LENGTH,c.HOST),n,u)})}catch(v){return s.reject(v)}},r.prototype._doRequest=function(t,e,n,r,o){var i=s.defer(),u=this,c=new XMLHttpRequest;c.open(t,e,!0);for(var p in n)if(n.hasOwnProperty(p)){var l=n[p];c.setRequestHeader(p,l)}return c.onerror=function(t){i.reject(t)},c.onabort=function(){i.reject(new Error("xhr aborted"))},c.onreadystatechange=function(){if(4===c.readyState){var t=c.status;1223===t&&(t=204);var e=c.getResponseHeader("Content-Type"),n=/application\/json/.test(e),r=n?JSON.parse(c.responseText):c.responseText,o=t>=200&&300>t||304===t;if(o){var s=u._fixHeaders(c.getAllResponseHeaders());i.resolve({http_headers:s,body:r})}else i.reject({status_code:t,message:r.message||"<message>",code:r.code||"<code>",request_id:r.requestId||"<request_id>"})}},c.upload&&a.each(["progress","error","abort"],function(t){c.upload.addEventListener(t,function(e){"function"==typeof u.emit&&u.emit(t,e)},!1)}),c.send(r),u._req={xhr:c},i.promise},r.prototype._guessContentLength=function(t){if(null==t||""===t)return 0;if(a.isString(t))return i.byteLength(t);if("undefined"!=typeof Blob&&t instanceof Blob)return t.size;if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer)return t.byteLength;throw new Error("No Content-Length is specified.")},r.prototype._fixHeaders=function(t){var e={};return t&&a.each(t.split(/\r?\n/),function(t){var n=t.indexOf(":");if(-1!==n){var r=t.substring(0,n).toLowerCase(),o=t.substring(n+1).replace(/^\s+|\s+$/,"");"etag"===r&&(o=o.replace(/"/g,"")),e[r]=o}}),e},r.prototype.buildQueryString=function(e){var n=t(47).stringify(e);return n.replace(/[()'!~.*\-_]/g,function(t){return"%"+t.charCodeAt().toString(16)})},r.prototype._getRequestUrl=function(t,e){var n=t,r=this.buildQueryString(e);return r&&(n+="?"+r),this.config.endpoint+n},e.exports=r},{22:22,37:37,44:44,46:46,47:47,48:48,49:49}],24:[function(t,e,n){var r={};n.guess=function(t){return t&&t.length?("."===t[0]&&(t=t.substr(1)),r[t.toLowerCase()]||"application/octet-stream"):"application/octet-stream"}},{}],25:[function(t,e,n){var r={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"};n.normalize=function(t,e){var n=encodeURIComponent(t);return n=n.replace(/[!'\(\)\*]/g,function(t){return r[t]}),e===!1&&(n=n.replace(/%2F/gi,"/")),n},n.trim=function(t){return(t||"").replace(/^\s+|\s+$/g,"")}},{}],26:[function(t,e,n){var r={runtimes:"html5",bos_endpoint:"http://bos.bj.baidubce.com",bos_credentials:null,bos_appendable:!1,bos_relay_server:"https://relay.efe.tech",multi_selection:!1,max_retries:0,retry_interval:1e3,auto_start:!1,max_file_size:"100mb",bos_multipart_min_size:"10mb",bos_multipart_parallel:1,bos_task_parallel:3,auth_stripped_headers:["User-Agent","Connection"],chunk_size:"4mb",bos_multipart_auto_continue:!0,bos_multipart_local_key_generator:"default",dir_selection:!1,get_new_uptoken:!0,uptoken_via_jsonp:!0,uptoken_timeout:5e3,uptoken_jsonp_timeout:5e3,tracker_id:"2e0bc8c5e7ceb25796ba4962e7b57387"};e.exports=r},{}],27:[function(t,e,n){e.exports={kPostInit:"PostInit",kKey:"Key",kListParts:"ListParts",kObjectMetas:"ObjectMetas",kFileFiltered:"FileFiltered",kFilesAdded:"FilesAdded",kFilesFilter:"FilesFilter",kNetworkSpeed:"NetworkSpeed",kBeforeUpload:"BeforeUpload",kUploadProgress:"UploadProgress",kFileUploaded:"FileUploaded",kUploadPartProgress:"UploadPartProgress",kChunkUploaded:"ChunkUploaded",kUploadResume:"UploadResume",kUploadResumeError:"UploadResumeError",kUploadComplete:"UploadComplete",kError:"Error",kAborted:"Aborted"}},{}],28:[function(t,e,n){function r(){c.apply(this,arguments),this.xhrPools=[]}var o=t(46),i=t(38),s=t(48),a=t(36),u=t(27),c=t(33);a.inherits(r,c),r.prototype.start=function(){if(this.aborted)return o.resolve();var t=this,e=this.eventDispatcher,n=this.options.file,r=this.options.bucket,c=this.options.object,p=this.options.metas,l=this.options.chunk_size,f=this.options.bos_multipart_parallel,h=a.guessContentType(n),d={"Content-Type":h},_=null;return this._initiateMultipartUpload(n,l,r,c,d).then(function(s){_=s.body.uploadId;var p=s.body.parts||[],h=o.defer(),d=a.getTasks(n,_,l,r,c);a.filterTasks(d,p);var v=p.length,y={lengthComputable:!0,loaded:v,total:d.length};return v&&e.dispatchEvent(u.kUploadProgress,[n,v/d.length,null]),i.mapLimit(d,f,t._uploadPart(y),function(t,e){t?h.reject(t):h.resolve(e)}),h.promise}).then(function(e){var o=[];return s.each(e,function(t,e){o.push({partNumber:e+1,eTag:t.http_headers.etag})}),t._generateLocalKey({blob:n,chunkSize:l,bucket:r,object:c}).then(function(t){a.removeUploadId(t)}),t.client.completeMultipartUpload(r,c,_,o,p)}).then(function(t){e.dispatchEvent(u.kUploadProgress,[n,1]),t.body.bucket=r,t.body.object=c,e.dispatchEvent(u.kFileUploaded,[n,t])})["catch"](function(r){var o=t.aborted?u.kAborted:u.kError;e.dispatchEvent(o,[r,n])})},r.prototype._initiateMultipartUpload=function(t,e,n,r,i){function s(){return l.client.initiateMultipartUpload(n,r,i).then(function(t){return p&&a.setUploadId(p,t.body.uploadId),t.body.parts=[],t})}var c,p,l=this,f=this.eventDispatcher,h={blob:t,chunkSize:e,bucket:n,object:r},d=this.options.bos_multipart_auto_continue?this._generateLocalKey(h):o.resolve(null);return d.then(function(e){return(p=e)?(c=a.getUploadId(p),c?l._listParts(t,n,r,c):s()):s()}).then(function(e){if(c&&p){var n=e.body.parts;f.dispatchEvent(u.kUploadResume,[t,n,null]),e.body.uploadId=c}return e})["catch"](function(e){if(c&&p)return f.dispatchEvent(u.kUploadResumeError,[t,e,null]),a.removeUploadId(p),s();throw e})},r.prototype._generateLocalKey=function(t){var e=this.options.bos_multipart_local_key_generator;return a.generateLocalKey(t,e)},r.prototype._listParts=function(t,e,n,r){var i=this,a=this.eventDispatcher,c=a.dispatchEvent(u.kListParts,[t,r]);return o.resolve(c).then(function(t){return s.isArray(t)&&t.length?{http_headers:{},body:{parts:t}}:i._listAllParts(e,n,r)})},r.prototype._listAllParts=function(t,e,n){function r(){var o={maxParts:c,partNumberMarker:p};i.client.listParts(t,e,n,o).then(function(t){null==u&&(u=t),a.push.apply(a,t.body.parts),p=t.body.nextPartNumberMarker,t.body.isTruncated===!1?(u.body.parts=a,s.resolve(u)):r()})["catch"](function(t){s.reject(t)})}var i=this,s=o.defer(),a=[],u=null,c=1e3,p=0;return r(),s.promise},r.prototype._uploadPart=function(t){function e(i,s){if(i.etag)return n.networkInfo.loadedBytes+=i.partSize,o.resolve({http_headers:{etag:i.etag},body:{}});var c=null==s?n.options.max_retries:s,p=n.options.retry_interval,l=i.file.slice(i.start,i.stop+1);l._previousLoaded=0;var f=n.client.uploadPartFromBlob(i.bucket,i.object,i.uploadId,i.partNumber,i.partSize,l),h=n.xhrPools.push(f);return f.then(function(e){++t.loaded;var o=t.loaded/t.total;r.dispatchEvent(u.kUploadProgress,[i.file,o,null]);var s={uploadId:i.uploadId,partNumber:i.partNumber,partSize:i.partSize,bucket:i.bucket,object:i.object,offset:i.start,total:l.size,response:e};return r.dispatchEvent(u.kChunkUploaded,[i.file,s]),n.xhrPools[h-1]=null,e})["catch"](function(t){if(c>0&&!n.aborted)return a.delay(p).then(function(){return e(i,c-1)});throw t})}var n=this,r=this.eventDispatcher;return function(t,n){var r=function(t){n(null,t)},o=function(t){n(t)};e(t).then(r,o)}},r.prototype.abort=function(){this.aborted=!0,this.xhrRequesting=null;for(var t=0;t<this.xhrPools.length;t++){var e=this.xhrPools[t];e&&"function"==typeof e.abort&&e.abort()}},e.exports=r},{27:27,33:33,36:36,38:38,46:46,48:48}],29:[function(t,e,n){function r(){this.loadedBytes=0,this.totalBytes=0,this._startTime=o.now(),this.reset()}var o=t(36);r.prototype.dump=function(){return[this.loadedBytes,o.now()-this._startTime,this.totalBytes-this.loadedBytes]},r.prototype.reset=function(){this.loadedBytes=0,this._startTime=o.now()},e.exports=r},{36:36}],30:[function(t,e,n){function r(){u.apply(this,arguments)}var o=t(46),i=t(48),s=t(36),a=t(27),u=t(33);s.inherits(r,u),r.prototype.start=function(t){if(this.aborted)return o.resolve();var e=this,n=this.eventDispatcher,r=this.options.file,u=this.options.bucket,c=this.options.object,p=this.options.metas,l=null==t?this.options.max_retries:t,f=this.options.retry_interval,h=s.guessContentType(r),d=i.extend({"Content-Type":h},p);return this.xhrRequesting=this.client.putObjectFromBlob(u,c,r,d),this.xhrRequesting.then(function(t){n.dispatchEvent(a.kUploadProgress,[r,1]),t.body.bucket=u,t.body.object=c,n.dispatchEvent(a.kFileUploaded,[r,t])})["catch"](function(t){var i=e.aborted?a.kAborted:a.kError;return n.dispatchEvent(i,[t,r]),t.status_code&&t.code&&t.request_id?o.resolve():l>0&&!e.aborted?s.delay(f).then(function(){return e.start(l-1)}):o.resolve()})},e.exports=r},{27:27,33:33,36:36,46:46,48:48}],31:[function(t,e,n){function r(t){this.collection=t}r.prototype.isEmpty=function(){return this.collection.length<=0},r.prototype.size=function(){return this.collection.length},r.prototype.dequeue=function(){return this.collection.shift()},e.exports=r},{}],32:[function(t,e,n){function r(t){this.options=t,this._cache={}}var o=t(46),i=t(36);r.prototype.get=function(t){var e=this;return null!=e._cache[t]?e._cache[t]:o.resolve(this._getImpl.apply(this,arguments)).then(function(n){return e._cache[t]=n,n})},r.prototype._getImpl=function(t){var e=this.options,n=e.uptoken_url,r=e.uptoken_timeout||e.uptoken_jsonp_timeout,s=e.uptoken_via_jsonp,a=o.defer();return $.ajax({url:n,jsonp:s?"callback":!1,dataType:s?"jsonp":"json",timeout:r,data:{sts:JSON.stringify(i.getDefaultACL(t))},success:function(t){a.resolve(t)},error:function(){a.reject(new Error("Get sts token timeout ("+r+"ms)."))}}),a.promise},e.exports=r},{36:36,46:46}],33:[function(t,e,n){function r(t,e,n){this.xhrRequesting=null,this.aborted=!1,this.networkInfo=null,this.client=t,this.eventDispatcher=e,this.options=n}function o(){throw new Error("unimplemented method.")}r.prototype.start=o,r.prototype.pause=o,r.prototype.resume=o,r.prototype.setNetworkInfo=function(t){this.networkInfo=t},r.prototype.abort=function(){this.xhrRequesting&&"function"==typeof this.xhrRequesting.abort&&(this.aborted=!0,this.xhrRequesting.abort(),this.xhrRequesting=null)},e.exports=r},{}],34:[function(t,e,n){n.init=function(t){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?"+t;var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}},{}],35:[function(t,e,n){function r(t){s.isString(t)&&(t=s.extend({browse_button:t,auto_start:!0},$(t).data()));var e={};this.options=s.extend({},p,e,t),this.options.max_file_size=a.parseSize(this.options.max_file_size),this.options.bos_multipart_min_size=a.parseSize(this.options.bos_multipart_min_size),this.options.chunk_size=a.parseSize(this.options.chunk_size);var n=this.options.bos_credentials;!n&&this.options.bos_ak&&this.options.bos_sk&&(this.options.bos_credentials={ak:this.options.bos_ak,sk:this.options.bos_sk}),this.client=new v({endpoint:a.normalizeEndpoint(this.options.bos_endpoint),credentials:this.options.bos_credentials,sessionToken:this.options.uptoken}),this._files=[],this._uploadingFiles={},this._abort=!1,this._working=!1,this._xhr2Supported=a.isXhr2Supported(),this._networkInfo=new d,this._init()}function o(t,e){return function(){t._aborted=!0,e._invoke(c.kAborted,[null,t])}}var i=t(46),s=t(48),a=t(36),u=t(34),c=t(27),p=t(26),l=t(30),f=t(28),h=t(32),d=t(29),_=t(18),v=t(20);r.prototype._getCustomizedSignature=function(t){var e=this.options,n=e.uptoken_timeout||e.uptoken_jsonp_timeout,r=e.uptoken_via_jsonp;return function(o,a,u,c,p){/\bed=([\w\.]+)\b/.test(location.search)&&(p.Host=RegExp.$1),s.isArray(e.auth_stripped_headers)&&(p=s.omit(p,e.auth_stripped_headers));var l=i.defer();return $.ajax({url:t,jsonp:r?"callback":!1,dataType:r?"jsonp":"json",timeout:n,data:{httpMethod:a,path:u,queries:JSON.stringify(c||{}),headers:JSON.stringify(p||{})},error:function(){l.reject(new Error("Get authorization timeout ("+n+"ms)."))},success:function(t){200===t.statusCode&&t.signature?l.resolve(t.signature,t.xbceDate):l.reject(new Error("createSignature failed, statusCode = "+t.statusCode))}}),l.promise}},r.prototype._invoke=function(t,e,n){var r=this.options.init||this.options.Init;if(r){var o=r[t];if("function"==typeof o)try{var s=null;return e=null==e?[s]:[s].concat(e),o.apply(null,e)}catch(a){if(n===!0)return i.reject(a)}}},r.prototype._init=function(){var t=this.options,e=t.accept;t.tracker_id&&u.init(t.tracker_id);var n=$(t.browse_button),r=n.prop("nodeName");if("INPUT"!==r){var o=n,p=o.outerWidth(),l=o.outerHeight(),f=$('<div class="bce-bos-uploader-input-container"><input type="file" /></div>');f.css({position:"absolute",top:0,left:0,width:p,height:l,overflow:"hidden","z-index":this._xhr2Supported?99:100}),f.find("input").css({position:"absolute",top:0,left:0,width:"100%",height:"100%","font-size":"999px",opacity:0}),o.css({position:"relative","z-index":this._xhr2Supported?100:99}),o.after(f),o.parent().css("position","relative"),t.browse_button=f.find("input"),this._xhr2Supported&&o.click(function(){t.browse_button.click()})}var h=this;if(!this._xhr2Supported&&"undefined"!=typeof mOxie&&s.isFunction(mOxie.FileInput)){var d=new mOxie.FileInput({runtime_order:"flash,html4",browse_button:$(t.browse_button).get(0),swf_url:t.flash_swf_url,accept:a.expandAcceptToArray(e),multiple:t.multi_selection,directory:t.dir_selection,file:"file"});d.onchange=s.bind(this._onFilesAdded,this),d.onready=function(){h._initEvents(),h._invoke(c.kPostInit)},d.init()}var v=t.bos_credentials?i.resolve():h.refreshStsToken();v.then(function(){t.bos_credentials?h.client.createSignature=function(t,e,n,r,o){var s=t||this.config.credentials;return i.fcall(function(){var t=new _(s.ak,s.sk);return t.generateAuthorization(e,n,r,o)})}:t.uptoken_url&&t.get_new_uptoken===!0&&(h.client.createSignature=h._getCustomizedSignature(t.uptoken_url)),h._xhr2Supported&&(h._initEvents(),h._invoke(c.kPostInit))})["catch"](function(t){h._invoke(c.kError,[t])})},r.prototype._initEvents=function(){var t=this.options;if(this._xhr2Supported){var e=$(t.browse_button);null==e.attr("multiple")&&e.attr("multiple",!!t.multi_selection),e.on("change",s.bind(this._onFilesAdded,this));var n=t.accept;if(null!=n){var r=a.expandAccept(n),o=/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor);o&&(r=a.extToMimeType(r)),e.attr("accept",r)}t.dir_selection&&(e.attr("directory",!0),e.attr("mozdirectory",!0),e.attr("webkitdirectory",!0))}this.client.on("progress",s.bind(this._onUploadProgress,this)),this.client.on("error",s.bind(this._onError,this)),this._xhr2Supported||(this.client.sendHTTPRequest=s.bind(a.fixXhr(this.options,!0),this.client))},r.prototype._filterFiles=function(t){var e=this,n=this.options.max_file_size,r=s.filter(t,function(t){return n>0&&t.size>n?(e._invoke(c.kFileFiltered,[t]),!1):!0});return this._invoke(c.kFilesFilter,[r])||r},r.prototype._onFilesAdded=function(t){var e=this,n=t.target.files;if(!n){var r=t.target.value.split(/[\/\\]/).pop();n=[{name:r,size:0}]}if(n=this._filterFiles(n),s.isArray(n)&&n.length){for(var i=0,u=0;u<n.length;u++){var p=n[u];p.abort=o(p,e),p.uuid=a.uuid(),i+=p.size}this._networkInfo.totalBytes+=i,this._files.push.apply(this._files,n),this._invoke(c.kFilesAdded,[n])}this.options.auto_start&&this.start()},r.prototype._onError=function(t){},r.prototype._onUploadProgress=function(t,e){var n=e.args,r=n.body;if(a.isBlob(r)){var o=t.lengthComputable?t.loaded/t.total:0;this._networkInfo.loadedBytes+=t.loaded-r._previousLoaded,this._invoke(c.kNetworkSpeed,this._networkInfo.dump()),r._previousLoaded=t.loaded;var i=c.kUploadProgress;n.params.partNumber&&n.params.uploadId&&(i=c.kUploadPartProgress),this._invoke(i,[r,o,t])}},r.prototype.remove=function(t){"string"==typeof t&&(t=this._uploadingFiles[t]||s.find(this._files,function(e){return e.uuid===t})),t&&"function"==typeof t.abort&&t.abort()},r.prototype.start=function(){var t=this;if(!this._working&&this._files.length){this._working=!0,this._abort=!1,this._networkInfo.reset();var e=this.options.bos_task_parallel;a.eachLimit(this._files,e,function(e,n){e._previousLoaded=0,t._uploadNext(e).then(function(){delete t._uploadingFiles[e.uuid],n(null,e)})["catch"](function(){delete t._uploadingFiles[e.uuid],n(null,e)})},function(e){t._working=!1,t._files.length=0,t._networkInfo.totalBytes=0,t._invoke(c.kUploadComplete)})}},r.prototype.stop=function(){this._abort=!0,this._working=!1},r.prototype.setOptions=function(t){var e=s.pick(t,"bos_credentials","bos_ak","bos_sk","uptoken","bos_bucket","bos_endpoint");this.options=s.extend(this.options,e);var n=this.client&&this.client.config;if(n){var r=null;t.bos_credentials?r=t.bos_credentials:t.bos_ak&&t.bos_sk&&(r={ak:t.bos_ak,sk:t.bos_sk}),r&&(this.options.bos_credentials=r,n.credentials=r),t.uptoken&&(n.sessionToken=t.uptoken),t.bos_endpoint&&(n.endpoint=a.normalizeEndpoint(t.bos_endpoint))}},r.prototype.refreshStsToken=function(){var t=this,e=t.options,n=t._xhr2Supported&&e.uptoken_url&&e.get_new_uptoken===!1;if(n){var r=new h(e);return r.get(e.bos_bucket).then(function(e){return t.setOptions({bos_ak:e.AccessKeyId,bos_sk:e.SecretAccessKey,uptoken:e.SessionToken})})}return i.resolve()},r.prototype._uploadNext=function(t){if(this._abort)return this._working=!1,i.resolve();if(t._aborted===!0)return i.resolve();var e=!0,n=this._invoke(c.kBeforeUpload,[t],e);if(n===!1)return i.resolve();var r=this;return i.resolve(n).then(function(){return r._uploadNextImpl(t)})["catch"](function(e){r._invoke(c.kError,[e,t])})},r.prototype._uploadNextImpl=function(t){var e=this,n=this.options,r=t.name,o=!0,a=s.pick(n,"flash_swf_url","max_retries","chunk_size","retry_interval","bos_multipart_parallel","bos_multipart_auto_continue","bos_multipart_local_key_generator");
return i.all([this._invoke(c.kKey,[t],o),this._invoke(c.kObjectMetas,[t])]).then(function(o){var i=n.bos_bucket,u=o[0],c=o[1],p="auto";s.isString(u)?r=u:s.isObject(u)&&(i=u.bucket||i,r=u.key||r,p=u.multipart||p);var h=e.client,d=e,_=s.extend(a,{file:t,bucket:i,object:r,metas:c}),v=null;return v="auto"===p&&t.size>n.bos_multipart_min_size?new f(h,d,_):new l(h,d,_),e._uploadingFiles[t.uuid]=t,t.abort=function(){return t._aborted=!0,v.abort()},v.setNetworkInfo(e._networkInfo),v.start()})},r.prototype.dispatchEvent=function(t,e,n){if(t===c.kAborted&&e&&e[1]){var r=e[1];if(r.size>0){var o=r._previousLoaded||0;this._networkInfo.totalBytes-=r.size-o,this._invoke(c.kNetworkSpeed,this._networkInfo.dump())}}return this._invoke(t,e,n)},e.exports=r},{18:18,20:20,26:26,27:27,28:28,29:29,30:30,32:32,34:34,36:36,46:46,48:48}],36:[function(t,e,n){function r(t,e){var n=a.filter(e||[],function(e){return+e.partNumber===t});return n.length?n[0].eTag:null}function o(t){var e=/^\w+:\/\/([^\/]+)/.exec(t);return e&&e[1]}var i=t(47),s=t(46),a=t(48),u=t(31),c=t(24);n.getTasks=function(t,e,n,r,o){for(var i=t.size,s=0,a=1,u=[];i>0;){var c=Math.min(i,n);u.push({file:t,uploadId:e,bucket:r,object:o,partNumber:a,partSize:c,start:s,stop:s+c-1}),i-=c,s+=c,a+=1}return u},n.getAppendableTasks=function(t,e,n){for(var r=t-e,o=[];r;){var i=Math.min(r,n);o.push({partSize:i,start:e,stop:e+i-1}),r-=i,e+=i}return o},n.parseSize=function(t){if("number"==typeof t)return t;var e=/^([\d\.]+)([mkg]?b?)$/i,n=e.exec(t);if(!n)return 0;var r=n[1],o=n[2];return/^k/i.test(o)?1024*r:/^m/i.test(o)?1024*r*1024:/^g/i.test(o)?1024*r*1024*1024:+r},n.isXhr2Supported=function(){return"XMLHttpRequest"in window&&"withCredentials"in new XMLHttpRequest},n.isAppendable=function(t){return"Appendable"===t["x-bce-object-type"]},n.delay=function(t){var e=s.defer();return setTimeout(function(){e.resolve()},t),e.promise},n.normalizeEndpoint=function(t){return t.replace(/(\/+)$/,"")},n.getDefaultACL=function(t){return{accessControlList:[{service:"bce:bos",region:"*",effect:"Allow",resource:[t+"/*"],permission:["READ","WRITE"]}]}},n.uuid=function(){var t=(Math.random()*Math.pow(2,32)).toString(36),e=(new Date).getTime();return"u-"+e+"-"+t},n.generateLocalKey=function(t,e){return"default"===e?s.resolve([t.blob.name,t.blob.size,t.chunkSize,t.bucket,t.object].join("&")):s.resolve(null)},n.getDefaultPolicy=function(t){if(null==t)return null;var e=(new Date).getTime(),n=new Date(e+864e5),r=n.toISOString().replace(/\.\d+Z$/,"Z");return{expiration:r,conditions:[{bucket:t}]}},n.getUploadId=function(t){return localStorage.getItem(t)},n.setUploadId=function(t,e){localStorage.setItem(t,e)},n.removeUploadId=function(t){localStorage.removeItem(t)},n.filterTasks=function(t,e){a.each(t,function(t){var n=t.partNumber,o=r(n,e);o&&(t.etag=o)})},n.expandAccept=function(t){var e=[];return a.isArray(t)?a.each(t,function(t){t.extensions&&e.push.apply(e,t.extensions.split(","))}):a.isString(t)&&(e=t.split(",")),e=a.map(e,function(t){return/^\./.test(t)?t:"."+t}),e.join(",")},n.extToMimeType=function(t){var e=a.map(t.split(","),function(t){return-1!==t.indexOf("/")?t:c.guess(t)});return e.join(",")},n.expandAcceptToArray=function(t){return!t||a.isArray(t)?t:a.isString(t)?[{title:"All files",extensions:t}]:[]},n.transformUrl=function(t){var e=/(https?:)\/\/([^\/]+)\/([^\/]+)\/([^\/]+)/;return t.replace(e,function(t,e,n,r,o){return/^v\d$/.test(r)?e+"//"+o+"."+n+"/"+r:e+"//"+r+"."+n+"/"+o})},n.isBlob=function(t){var e=null;if("undefined"!=typeof Blob)e=Blob;else{if("undefined"==typeof mOxie||!a.isFunction(mOxie.Blob))return!1;e=mOxie.Blob}return t instanceof e},n.now=function(){return(new Date).getTime()},n.toDHMS=function(t){var e=0,n=0,r=0;return t>=60&&(r=~~(t/60),t-=60*r),r>=60&&(n=~~(r/60),r-=60*n),n>=24&&(e=~~(n/24),n-=24*e),{DD:e,HH:n,MM:r,SS:t}},n.fixXhr=function(t,e){return function(r,a,u,c){var p=this,l=o(c.endpoint);u.headers["x-bce-date"]=(new Date).toISOString().replace(/\.\d+Z$/,"Z"),u.headers.host=l;var f=r;"PUT"===r&&(r="POST");var h,d=r,_=u.body;if("HEAD"===r){var v=n.normalizeEndpoint(t.bos_relay_server);h=v+"/"+l+a,u.params.httpMethod=r,d="POST"}else e===!0?(h=n.transformUrl(c.endpoint+a),u.headers.host=o(h)):h=c.endpoint+a;"POST"!==d||_||(_='{"FORCE_POST": true}');var y=s.defer(),b=new mOxie.XMLHttpRequest;b.onload=function(){var t=null;try{t=JSON.parse(b.response||"{}")}catch(e){t={}}b.status>=200&&b.status<300?"HEAD"===r?y.resolve(t):y.resolve({http_headers:{},body:t}):y.reject({status_code:b.status,message:t.message||"",code:t.code||"",request_id:t.requestId||""})},b.onerror=function(t){y.reject(t)},b.upload&&(b.upload.onprogress=function(t){if("PUT"===f){t.lengthComputable=!0;var e={httpMethod:f,resource:a,args:u,config:c,xhr:b};p.emit("progress",t,e)}});var g=p.createSignature(p.config.credentials,r,a,u.params,u.headers);return g.then(function(e,n){e&&(u.headers.authorization=e),n&&(u.headers["x-bce-date"]=n);var r=i.stringify(u.params);r&&(h+="?"+r),b.open(d,h,!0);for(var o in u.headers)if(u.headers.hasOwnProperty(o)&&"host"!==o){var s=u.headers[o];b.setRequestHeader(o,s)}b.send(_,{runtime_order:"flash",swf_url:t.flash_swf_url})})["catch"](function(t){y.reject(t)}),y.promise}},n.eachLimit=function(t,e,n,r){function o(){var t=c.dequeue();t&&(i++,n(t,function(t){i--,t?(s=!0,a=!0,r(t)):c.isEmpty()||s?0>=i&&(a||(a=!0,r())):setTimeout(o,0)}))}var i=0,s=!1,a=!1,c=new u(t);e=Math.min(e,c.size());for(var p=0;e>p;p++)o()},n.inherits=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},n.guessContentType=function(t,e){var n=t.type;if(!n){var r=t.name,o=r.split(/\./g).pop();n=c.guess(o)}return e||/charset=/.test(n)||(n+="; charset=UTF-8"),n}},{24:24,31:31,46:46,47:47,48:48}],37:[function(t,e,n){function r(){}r.byteLength=function(t){var e=encodeURIComponent(t).match(/%[89ABab]/g);return t.length+(e?e.length:0)},e.exports=r},{}],38:[function(t,e,n){n.mapLimit=t(2)},{2:2}],39:[function(e,n,r){!function(e,o){"object"==typeof r?n.exports=r=o():"function"==typeof t&&t.amd?t([],o):e.CryptoJS=o()}(this,function(){var t=t||function(t,e){var n=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),r={},o=r.lib={},i=o.Base=function(){return{extend:function(t){var e=n(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),s=o.WordArray=i.extend({init:function(t,n){t=this.words=t||[],n!=e?this.sigBytes=n:this.sigBytes=4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,o=t.sigBytes;if(this.clamp(),r%4)for(var i=0;o>i;i++){var s=n[i>>>2]>>>24-i%4*8&255;e[r+i>>>2]|=s<<24-(r+i)%4*8}else for(var i=0;o>i;i+=4)e[r+i>>>2]=n[i>>>2];return this.sigBytes+=o,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=i.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n,r=[],o=function(e){var e=e,n=987654321,r=4294967295;return function(){n=36969*(65535&n)+(n>>16)&r,e=18e3*(65535&e)+(e>>16)&r;var o=(n<<16)+e&r;return o/=4294967296,o+=.5,o*(t.random()>.5?1:-1)}},i=0;e>i;i+=4){var a=o(4294967296*(n||t.random()));n=987654071*a(),r.push(4294967296*a()|0)}return new s.init(r,e)}}),a=r.enc={},u=a.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],o=0;n>o;o++){var i=e[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;e>r;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new s.init(n,e/2)}},c=a.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],o=0;n>o;o++){var i=e[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;e>r;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new s.init(n,e)}},p=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},l=o.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=p.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,o=n.sigBytes,i=this.blockSize,a=4*i,u=o/a;u=e?t.ceil(u):t.max((0|u)-this._minBufferSize,0);var c=u*i,p=t.min(4*c,o);if(c){for(var l=0;c>l;l+=i)this._doProcessBlock(r,l);var f=r.splice(0,c);n.sigBytes-=p}return new s.init(f,p)},clone:function(){var t=i.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),f=(o.Hasher=l.extend({cfg:i.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){t&&this._append(t);var e=this._doFinalize();return e},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new f.HMAC.init(t,n).finalize(e)}}}),r.algo={});return r}(Math);return t})},{}],40:[function(e,n,r){!function(o,i,s){"object"==typeof r?n.exports=r=i(e(39),e(42),e(41)):"function"==typeof t&&t.amd?t(["./core","./sha256","./hmac"],i):i(o.CryptoJS)}(this,function(t){return t.HmacSHA256})},{39:39,41:41,42:42}],41:[function(e,n,r){!function(o,i){"object"==typeof r?n.exports=r=i(e(39)):"function"==typeof t&&t.amd?t(["./core"],i):i(o.CryptoJS)}(this,function(t){!function(){var e=t,n=e.lib,r=n.Base,o=e.enc,i=o.Utf8,s=e.algo;s.HMAC=r.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=i.parse(e));var n=t.blockSize,r=4*n;e.sigBytes>r&&(e=t.finalize(e)),e.clamp();for(var o=this._oKey=e.clone(),s=this._iKey=e.clone(),a=o.words,u=s.words,c=0;n>c;c++)a[c]^=1549556828,u[c]^=909522486;o.sigBytes=s.sigBytes=r,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);e.reset();var r=e.finalize(this._oKey.clone().concat(n));return r}})}()})},{39:39}],42:[function(e,n,r){!function(o,i){"object"==typeof r?n.exports=r=i(e(39)):"function"==typeof t&&t.amd?t(["./core"],i):i(o.CryptoJS)}(this,function(t){return function(e){var n=t,r=n.lib,o=r.WordArray,i=r.Hasher,s=n.algo,a=[],u=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;n>=r;r++)if(!(t%r))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var r=2,o=0;64>o;)t(r)&&(8>o&&(a[o]=n(e.pow(r,.5))),u[o]=n(e.pow(r,1/3)),o++),r++}();var c=[],p=s.SHA256=i.extend({_doReset:function(){this._hash=new o.init(a.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],s=n[3],a=n[4],p=n[5],l=n[6],f=n[7],h=0;64>h;h++){if(16>h)c[h]=0|t[e+h];else{var d=c[h-15],_=(d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3,v=c[h-2],y=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;c[h]=_+c[h-7]+y+c[h-16]}var b=a&p^~a&l,g=r&o^r&i^o&i,m=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),k=(a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25),E=f+k+b+u[h]+c[h],T=m+g;f=l,l=p,p=a,a=s+E|0,s=i,i=o,o=r,r=E+T|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+p|0,n[6]=n[6]+l|0,n[7]=n[7]+f|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,o=8*t.sigBytes;return n[o>>>5]|=128<<24-o%32,n[(o+64>>>9<<4)+14]=e.floor(r/4294967296),n[(o+64>>>9<<4)+15]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});n.SHA256=i._createHelper(p),n.HmacSHA256=i._createHmacHelper(p)}(Math),t.SHA256})},{39:39}],43:[function(t,e,n){var r=t(40),o=t(39).enc.Hex;n.createHmac=function(t,e){if("sha256"===t){var n=null,i={update:function(t){n=r(t,e).toString(o)},digest:function(){return n}};return i}}},{39:39,40:40}],44:[function(t,e,n){function r(){this.__events={}}r.prototype.emit=function(t,e){var n=this.__events[t];if(!n)return!1;for(var r=[].slice.call(arguments,1),o=0;o<n.length;o++){var i=n[o];try{i.apply(this,r)}catch(s){}}return!0},r.prototype.on=function(t,e){this.__events[t]?this.__events[t].push(e):this.__events[t]=[e]},n.EventEmitter=r},{}],45:[function(t,e,n){function r(t){return s.exec(t).slice(1)}function o(t,e){for(var n=0,r=t.length-1;r>=0;r--){var o=t[r];"."===o?t.splice(r,1):".."===o?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}var i=t(48),s=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,a="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return 0>e&&(e=t.length+e),t.substr(e,n)};n.extname=function(t){return r(t)[3]},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(i.filter(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},n.normalize=function(t){var e="/"===t.charAt(0),n="/"===a(t,-1);return t=o(i.filter(t.split("/"),function(t){return!!t}),!e).join("/"),t||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t}},{48:48}],46:[function(t,e,n){n.resolve=function(){return Promise.resolve.apply(Promise,arguments)},n.reject=function(){return Promise.reject.apply(Promise,arguments)},n.all=function(){return Promise.all.apply(Promise,arguments)},n.fcall=function(t){try{return Promise.resolve(t())}catch(e){return Promise.reject(e)}},n.defer=function(){var t={};return t.promise=new Promise(function(e,n){t.resolve=function(){e.apply(null,arguments)},t.reject=function(){n.apply(null,arguments)}}),t}},{}],47:[function(t,e,n){function r(t){return"string"==typeof t?t:"number"==typeof t&&isFinite(t)?""+t:"boolean"==typeof t?t?"true":"false":""}var o=t(48);n.stringify=function(t,e,n,i){e=e||"&",n=n||"=";var s=encodeURIComponent;if(i&&"function"==typeof i.encodeURIComponent&&(s=i.encodeURIComponent),null!==t&&"object"==typeof t){for(var a=o.keys(t),u=a.length,c=u-1,p="",l=0;u>l;++l){var f=a[l],h=t[f],d=s(r(f))+n;if(o.isArray(h)){for(var _=h.length,v=_-1,y=0;_>y;++y)p+=d+s(r(h[y])),v>y&&(p+=e);_&&c>l&&(p+=e)}else p+=d+s(r(h)),c>l&&(p+=e)}return p}return""}},{48:48}],48:[function(t,e,n){function r(t,e,n){for(var r=[],o=0;o<t.length;o++)r[o]=e.call(n,t[o],o,t);return r}function o(t,e,n){for(var r=0;r<t.length;r++)e.call(n,t[r],r,t)}function i(t,e,n){for(var r=0;r<t.length;r++){var o=t[r];if(e.call(n,o,r,t))return o}}function s(t,e,n){for(var r=[],o=0;o<t.length;o++){var i=t[o];e.call(n,i,o,t)&&r.push(i)}return r}function a(t,e){for(var n=l(e)?e:[].slice.call(arguments,1),r={},o=p(t),i=0;i<o.length;i++){var s=o[i];-1===n.indexOf(s)&&(r[s]=t[s])}return r}function u(t,e,n){var r,o,i,s={};if(h(e)){var a=e,u=p(t);for(r=0;r<u.length;r++)o=u[r],i=t[o],a.call(n,i,o,t)&&(s[o]=i)}else{var c=l(e)?e:[].slice.call(arguments,1);for(r=0;r<c.length;r++)o=c[r],i=t[o],s[o]=i}return s}function c(t,e){return function(){return t.apply(e,[].slice.call(arguments))}}function p(t){var e,n,r=[];for(e in t)y.call(t,e)&&r.push(e);if(b)for(n=0;n<g.length;n++)y.call(t,g[n])&&r.push(g[n]);return r}var l=t(5),f=t(10),h=t(14),d=t(15),_=t(16),v=t(17),y=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),g=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];n.bind=c,n.each=o,n.extend=t(13),n.filter=s,n.find=i,n.isArray=l,n.isFunction=h,n.isNumber=d,n.isObject=_,n.isString=v,n.map=r,n.omit=a,n.pick=u,n.keys=p,n.noop=f},{10:10,13:13,14:14,15:15,16:16,17:17,5:5}],49:[function(t,e,n){var r=t(48);n.inherits=function(t,e){var n=t.prototype,o=new Function;o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t,r.extend(t.prototype,n)},n.format=function(t){var e=arguments.length;if(1===e)return t;for(var n="",r=1,o=0,i=0;i<t.length;){if(37===t.charCodeAt(i)&&i+1<t.length)switch(t.charCodeAt(i+1)){case 100:if(r>=e)break;i>o&&(n+=t.slice(o,i)),n+=Number(arguments[r++]),o=i+=2;continue;case 115:if(r>=e)break;i>o&&(n+=t.slice(o,i)),n+=String(arguments[r++]),o=i+=2;continue;case 37:i>o&&(n+=t.slice(o,i)),n+="%",o=i+=2;continue}++i}return 0===o?n=t:o<t.length&&(n+=t.slice(o)),n}},{48:48}]},{},[1])(1)});